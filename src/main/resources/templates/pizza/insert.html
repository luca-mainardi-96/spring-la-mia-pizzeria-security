<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insert</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>

    <nav th:replace="~{fragments :: navbar('Details')}"></nav>

    <div class="container justify-content-center">
        <div class="row">
            <form class="row g-3"  
                id="pizza-form" 
                th:object="${pizza}" 
                th:action="@{/pizza/insert}" 
                method="post">

                <div class="col-8">
                    <h4>Pizza</h4>
                    <div class="col-12 py-2">
                        <input name="name" 
                            type="text" 
                            class="form-control" 
                            th:field="*{name}" 
                            placeholder="Inserisci il nome della nuova pizza"
                            th:errorClass="is-invalid">

                        <div th:if="${#fields.hasErrors('name')}" class="invalid-feedback">
                            <ul>
                                <li th:each="err : ${#fields.errors('name')}" th:text="${err}"></li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-12 py-2">
                        <input name="doughType" 
                            type="text" 
                            class="form-control" 
                            th:field="*{doughType}" 
                            placeholder="Inserisci il tipo di impasto della nuova pizza"
                            th:errorClass="is-invalid">

                        <div th:if="${#fields.hasErrors('doughType')}" class="invalid-feedback">
                            <ul>
                                <li th:each="err : ${#fields.errors('doughType')}" th:text="${err}"></li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-12 py-2">
                        <input name="photo" 
                            type="text" 
                            class="form-control" 
                            th:field="*{photo}" 
                            placeholder="Inserisci l'URL della foto che mostra la nuova pizza"
                            th:errorClass="is-invalid">

                        <div th:if="${#fields.hasErrors('photo')}" class="invalid-feedback">
                            <ul>
                                <li th:each="err : ${#fields.errors('photo')}" th:text="${err}"></li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-12 py-2">
                        <div class="row">
                            <div class="col-5">
                                <input name="prepTime" 
                                    type="number" 
                                    class="form-control" 
                                    th:field="*{prepTime}" 
                                    placeholder="Inserisci il tempo di preparazione stimato della nuova pizza"
                                    th:errorClass="is-invalid">

                                <div th:if="${#fields.hasErrors('prepTime')}" class="invalid-feedback">
                                    <ul>
                                        <li th:each="err : ${#fields.errors('prepTime')}" th:text="${err}"></li>
                                    </ul>
                                </div>
                            </div>

                            <div class="col-5">
                                <input name="price" 
                                    type="number" 
                                    class="form-control" 
                                    th:field="*{price}" 
                                    placeholder="Inserisci il prezzo della nuova pizza"
                                    th:errorClass="is-invalid">

                                <div th:if="${#fields.hasErrors('price')}" class="invalid-feedback">
                                    <ul>
                                        <li th:each="err : ${#fields.errors('price')}" th:text="${err}"></li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="col-2">
                                <button type="submit" class="btn btn-outline-success">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none"
                                        stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
                                        class="bi bi-pizza-slice" viewBox="0 0 16 16">
                                    
                                        <path d="M2 6 L8 15 L14 6 A11 5 0 0 0 2 6 Z"/>

                                        <circle cx="5.8" cy="9.1" r=".6" fill="currentColor" stroke="none"/>
                                        <circle cx="8.8" cy="7.6" r=".6" fill="currentColor" stroke="none"/>

                                        <path d="M6.2 10.8 Q7.0 10.1 7.8 10.8 M7.0 10.8 L7.0 11.4" fill="none"/>
                                        <path d="M9.8 9.5 Q10.6 8.8 11.4 9.5 M10.6 9.5 L10.6 10.1" fill="none"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <h4>Ingredients</h4>
                    <div class="form-check" th:each="ing : ${ingredientsList}">
                        <input class="form-check-input" 
                                type="checkbox" 
                                th:id="|ingredients_${ing.id}|"
                                th:value="${ing.id}" 
                                th:field="*{ingredients}">
                        <label th:for="|ingredients_${ing.id}|" 
                                class="form-check-label" 
                                th:text="${ing.name}"></label>
                    </div>
                    <div th:if="${#fields.hasErrors('ingredients')}" class="text-danger">
                        <ul class="mb-0">
                            <li th:each="err : ${#fields.errors('ingredients')}" th:text="${err}"></li>
                        </ul>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>   
</body>
</html>